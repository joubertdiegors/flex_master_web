{% extends 'base_store.html' %}

{% block title %}Token Expirado - Sacolão{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="card shadow-sm">
                <div class="card-header bg-danger text-white text-center">
                    <h2 class="mb-0">Token de Verificação Expirado</h2>
                </div>
                <div class="card-body text-center">
                    
                    {% if customer %}
                        {% if days_left > 0 %}
                            <p class="mb-4">
                                Olá, <strong>{{ customer.first_name }}</strong>.<br>
                                Seu link de verificação expirou, mas você ainda tem 
                                <strong>{{ days_left }} dia(s)</strong> para validar seu e-mail 
                                antes que sua conta seja removida.
                            </p>

                            <p class="mb-4">
                                Clique no botão abaixo para reenviar o e-mail de verificação:
                            </p>
                            <form method="POST" action="{% url 'resend_verification' customer.pk %}">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-primary px-4 py-2">
                                    Reenviar E-mail de Verificação
                                </button>
                            </form>

                            <p class="mt-4 text-muted">
                                Caso o e-mail <strong>{{ customer.email }}</strong> não seja o correto, 
                                basta ignorar esta mensagem. O cadastro será excluído em 
                                <strong>{{ days_left }} dia(s)</strong>.
                            </p>

                        {% else %}
                            <p class="mb-4">
                                Infelizmente, seu período de verificação expirou completamente.<br>
                                Sua conta pode ser removida a qualquer momento.
                            </p>
                            <p class="mb-4">
                                Se desejar, você ainda pode tentar reenviar o e-mail de verificação 
                                clicando no botão abaixo:
                            </p>
                            <form method="POST" action="{% url 'resend_verification' customer.pk %}">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-warning px-4 py-2">
                                    Reenviar E-mail de Verificação
                                </button>
                            </form>

                            <p class="mt-4 text-muted">
                                Caso o e-mail <strong>{{ customer.email }}</strong> não seja o correto, 
                                basta ignorar esta mensagem. Sua conta será excluída automaticamente.
                            </p>
                        {% endif %}
                    {% else %}
                        <p class="mb-4">
                            Link de verificação inválido ou corrompido.
                        </p>
                        <p class="mb-4">
                            Por favor, realize um novo cadastro ou contate o suporte para mais informações.
                        </p>
                    {% endif %}

                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
